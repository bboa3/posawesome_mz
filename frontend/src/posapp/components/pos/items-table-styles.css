/* =================================================================
   POS TABLE COMPONENT - REFACTORED STYLES
   Clean, organized CSS with proper naming and no conflicts
   ================================================================= */

/* =================================================================
   BASE TABLE STRUCTURE
   ================================================================= */

/* Main table container */
.pos-table {
	border-radius: 8px;
	overflow: hidden;
	box-shadow: 0 2px 8px var(--pos-shadow);
	border: 1px solid var(--pos-border);
	height: 100%;
	width: 100%;
	max-width: 100%;
	display: flex;
	flex-direction: column;
	transition: all 0.3s ease;
	background: var(--pos-card-bg);
	margin: 0;
	padding: 0;
}

/* Responsive table container */
.responsive-table-container {
	position: relative;
	transition: all 0.3s ease;
	width: 100%;
	max-width: 100%;
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	will-change: width, height;
	contain: layout style;
}

/* Items table container */
.items-table-container {
	overflow-y: auto;
	width: 100%;
	max-width: 100%;
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

/* =================================================================
   TABLE STRUCTURE - HEADERS, ROWS, CELLS
   ================================================================= */

/* Table wrapper styling */
.pos-table :deep(.v-data-table__wrapper),
.pos-table :deep(.v-table__wrapper) {
	border-radius: 0;
	height: 100%;
	width: 100%;
	max-width: 100%;
	overflow-y: auto;
	scrollbar-width: thin;
	margin: 0;
	padding: 0;
	border: none;
}

/* Full width enforcement for nested elements */
.pos-table :deep(.v-data-table),
.pos-table :deep(.v-data-table-virtual),
.pos-table :deep(.v-table) {
	width: 100% !important;
	max-width: 100% !important;
	margin: 0 !important;
	padding: 0 !important;
	border-radius: 0 !important;
}

.pos-table :deep(table) {
	width: 100% !important;
	max-width: 100% !important;
	margin: 0 !important;
	border-collapse: collapse !important;
	table-layout: auto !important;
	border-spacing: 0;
}

/* Table headers */
.pos-table :deep(th) {
	font-weight: 600;
	font-size: 0.8rem;
	text-transform: uppercase;
	letter-spacing: 0.3px;
	padding: 12px;
	border-bottom: 1px solid var(--pos-border);
	background-color: var(--pos-table-header-bg);
	color: var(--pos-text-primary);
	position: sticky;
	top: 0;
	z-index: 3;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 150px;
	min-width: 80px;
	text-align: center;
	vertical-align: middle !important;
	line-height: 1.2 !important;
	height: 40px;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	background-clip: padding-box;
	border-radius: 0;
	user-select: none;
	cursor: default;
	will-change: background-color, transform, box-shadow;
	border: none;
	outline: none;
	box-sizing: border-box;
	border-right: 1px solid var(--pos-border-light);
	contain: layout style;
}

.pos-table :deep(th:last-child) {
	border-right: none;
}

/* Header hover effects */
.pos-table :deep(th:hover) {
	background-color: var(--pos-hover-bg);
	transform: translateY(-1px);
	box-shadow: 0 4px 12px var(--pos-shadow);
	z-index: 2;
}

/* Header content styling */
.pos-table :deep(th .v-data-table-header__content) {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	width: 100%;
	padding: 0;
	margin: 0;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
	z-index: 1;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 100%;
	box-sizing: border-box;
}

.pos-table :deep(th:hover .v-data-table-header__content) {
	color: var(--pos-primary);
	font-weight: 600;
	letter-spacing: 0.02em;
	text-shadow: 0 1px 2px var(--pos-shadow-light);
}

/* Table rows */
.pos-table :deep(tr) {
	transition: background-color 0.2s ease;
	border-bottom: 1px solid rgba(0, 0, 0, 0.05);
	width: 100% !important;
	max-width: 100% !important;
	margin: 0 !important;
	padding: 0 !important;
	min-height: var(--cell-height, 60px);
}

.pos-table :deep(tr:hover) {
	background-color: var(--pos-hover-bg);
}

/* Table cells */
.pos-table :deep(td) {
	padding: 16px 12px;
	vertical-align: middle;
	height: 60px;
	text-align: center;
	color: var(--pos-text-primary);
	position: relative;
}

.pos-table :deep(td) > div {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	box-sizing: border-box;
}

/* =================================================================
   QUANTITY COUNTER COMPONENT
   ================================================================= */

.pos-table__qty-counter {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 6px;
	padding: 4px;
	min-width: 130px;
	max-width: 180px;
	width: auto;
	height: auto;
	background: var(--pos-input-bg);
	border-radius: 12px;
	backdrop-filter: blur(10px);
	border: 1px solid var(--pos-border);
	transition: all 0.3s ease;
	margin: 0 auto;
	flex-shrink: 0;
	box-sizing: border-box;
}

.pos-table__qty-counter:hover {
	background: var(--pos-hover-bg);
	box-shadow: 0 4px 16px var(--pos-shadow);
	transform: translateY(-1px);
}

.pos-table__qty-btn {
	width: 32px !important;
	height: 32px !important;
	min-width: 32px !important;
	border-radius: 8px !important;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
	box-shadow:
		0 2px 8px var(--pos-shadow),
		0 1px 3px var(--pos-shadow-light) !important;
	font-weight: 600 !important;
	backdrop-filter: blur(10px) !important;
	position: relative !important;
	overflow: hidden !important;
	flex-shrink: 0;
}

.pos-table__qty-btn::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: var(--pos-pressed-bg);
	transition: transform 0.3s ease;
	transform: translateX(-100%);
	z-index: 0;
}

.pos-table__qty-btn:hover::before {
	transform: translateX(0);
}

.pos-table__qty-btn .v-icon {
	position: relative;
	z-index: 1;
}

.pos-table__qty-btn--minus {
	background: var(--pos-warning-container) !important;
	color: var(--pos-warning) !important;
	border: 2px solid var(--pos-warning) !important;
}

.pos-table__qty-btn--minus .v-icon {
	color: var(--pos-warning) !important;
	position: relative;
	z-index: 2;
	transition: color 0.3s ease;
}

.pos-table__qty-btn--minus:hover {
	background: var(--pos-warning) !important;
	color: white !important;
	box-shadow:
		0 6px 20px var(--pos-shadow),
		0 4px 8px var(--pos-shadow-light) !important;
	transform: translateY(-2px) scale(1.05) !important;
}

.pos-table__qty-btn--minus:hover .v-icon {
	color: white !important;
}

.pos-table__qty-btn--plus {
	background: linear-gradient(145deg, #d1fae5, #34d399) !important;
	color: #065f46 !important;
	border: 2px solid rgba(52, 211, 153, 0.3) !important;
}

.pos-table__qty-btn--plus .v-icon {
	color: #065f46 !important;
	position: relative;
	z-index: 2;
	transition: color 0.3s ease;
}

.pos-table__qty-btn--plus:hover {
	background: linear-gradient(145deg, #34d399, #10b981) !important;
	color: white !important;
	box-shadow:
		0 6px 20px rgba(52, 211, 153, 0.25),
		0 4px 8px rgba(0, 0, 0, 0.08) !important;
	transform: translateY(-2px) scale(1.05) !important;
}

.pos-table__qty-btn--plus:hover .v-icon {
	color: white !important;
}

/* Delete button styling */
.pos-table__delete-btn {
	width: 32px !important;
	height: 32px !important;
	min-width: 32px !important;
	border-radius: 8px !important;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
	box-shadow:
		0 2px 8px var(--pos-shadow),
		0 1px 3px var(--pos-shadow-light) !important;
	font-weight: 600 !important;
	backdrop-filter: blur(10px) !important;
	position: relative !important;
	overflow: hidden !important;
	flex-shrink: 0;
	background: linear-gradient(145deg, #fecaca, #f87171) !important;
	color: #7f1d1d !important;
	border: 2px solid rgba(248, 113, 113, 0.3) !important;
}

.pos-table__delete-btn::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: var(--pos-pressed-bg);
	transition: transform 0.3s ease;
	transform: translateX(-100%);
	z-index: 0;
}

.pos-table__delete-btn:hover::before {
	transform: translateX(0);
}

.pos-table__delete-btn .v-icon {
	position: relative;
	z-index: 1;
	color: #7f1d1d !important;
}

.pos-table__delete-btn:hover {
	background: linear-gradient(145deg, #f87171, #ef4444) !important;
	box-shadow:
		0 6px 20px rgba(248, 113, 113, 0.25),
		0 4px 8px rgba(0, 0, 0, 0.08) !important;
	transform: translateY(-2px) scale(1.05) !important;
}

.pos-table__delete-btn:hover .v-icon {
	color: white !important;
}

.pos-table__qty-display {
	min-width: 50px;
	max-width: 100px;
	width: auto;
	flex: 1 1 auto;
	text-align: center;
	font-weight: 600;
	padding: 6px 4px;
	border-radius: 6px;
	background: var(--pos-primary-container);
	border: 1px solid var(--pos-border);
	font-family:
		"SF Pro Display", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", "Noto Sans Arabic", "Tahoma",
		sans-serif;
	font-variant-numeric: lining-nums tabular-nums;
	font-feature-settings:
		"tnum" 1,
		"lnum" 1,
		"kern" 1;
	color: var(--pos-primary);
	font-size: 0.8rem;
	transition: all 0.2s ease;
	box-shadow: 0 1px 3px var(--pos-shadow-light);
	display: flex;
	align-items: center;
	justify-content: center;
	height: 32px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	letter-spacing: -0.02em;
	word-spacing: -0.1em;
	direction: ltr;
}

.pos-table__qty-display--negative {
	color: var(--pos-error);
	background: var(--pos-error-container);
	border-color: var(--pos-error);
}

.pos-table__qty-display--large {
	min-width: 70px;
	max-width: 120px;
	font-size: 0.75rem;
	padding: 6px 3px;
	letter-spacing: -0.04em;
}

/* =================================================================
   EXPANDED ROW CONTENT
   ================================================================= */

.expanded-row-cell {
	padding: 0 !important;
	width: 100% !important;
	max-width: 100% !important;
	overflow: hidden;
	box-sizing: border-box;
	position: relative;
}

.expanded-content {
	padding: 24px;
	width: 100% !important;
	max-width: 100% !important;
	box-sizing: border-box;
	background: #f8f9fa;
	border-radius: 0 0 8px 8px;
	border: 1px solid rgba(0, 0, 0, 0.1);
	border-top: none;
	animation: expandIn 0.3s ease forwards;
	container-type: inline-size;
	container-name: expanded-content;
	margin: 0;
	position: relative;
	overflow: visible;
}

@keyframes expandIn {
	from {
		opacity: 0;
		transform: translateY(-20px) scale(0.95);
		max-height: 0;
	}
	to {
		opacity: 1;
		transform: translateY(0) scale(1);
		max-height: 1000px;
	}
}

/* =================================================================
   RESPONSIVE DESIGN
   ================================================================= */

.responsive-table-container.breakpoint-xs {
	--table-padding: 8px;
	--header-font-size: 0.65rem;
	--cell-padding: 8px 4px;
	--cell-height: 48px;
}

.responsive-table-container.breakpoint-sm {
	--table-padding: 12px;
	--header-font-size: 0.7rem;
	--cell-padding: 12px 6px;
	--cell-height: 52px;
}

.responsive-table-container.breakpoint-md {
	--table-padding: 16px;
	--header-font-size: 0.75rem;
	--cell-padding: 14px 8px;
	--cell-height: 56px;
}

.responsive-table-container.breakpoint-lg {
	--table-padding: 16px;
	--header-font-size: 0.8rem;
	--cell-padding: 16px 12px;
	--cell-height: 60px;
}

.responsive-table-container.breakpoint-xl {
	--table-padding: 20px;
	--header-font-size: 0.85rem;
	--cell-padding: 18px 12px;
	--cell-height: 64px;
}

/* Container-aware responsive adjustments */
.responsive-table-container.compact-view .pos-table__qty-counter {
	min-width: 110px;
	max-width: 140px;
	gap: 4px;
}

.responsive-table-container.compact-view .pos-table__qty-display {
	min-width: 35px;
	max-width: 65px;
	height: 28px;
	font-size: 0.7rem;
	padding: 4px 3px;
	letter-spacing: -0.03em;
}

.responsive-table-container.compact-view .pos-table__qty-btn {
	width: 28px !important;
	height: 28px !important;
	min-width: 28px !important;
}

/* =================================================================
   RTL SUPPORT
   ================================================================= */

[dir="rtl"] .pos-table__qty-counter--rtl,
[lang^="ar"] .pos-table__qty-counter,
[lang^="he"] .pos-table__qty-counter,
[lang^="fa"] .pos-table__qty-counter {
	flex-direction: row !important;
}

[dir="rtl"] .pos-table__qty-counter--rtl .pos-table__qty-btn--plus,
[lang^="ar"] .pos-table__qty-counter .pos-table__qty-btn--plus,
[lang^="he"] .pos-table__qty-counter .pos-table__qty-btn--plus,
[lang^="fa"] .pos-table__qty-counter .pos-table__qty-btn--plus {
	order: 3 !important;
}

[dir="rtl"] .pos-table__qty-counter--rtl .pos-table__qty-display,
[lang^="ar"] .pos-table__qty-counter .pos-table__qty-display,
[lang^="he"] .pos-table__qty-counter .pos-table__qty-display,
[lang^="fa"] .pos-table__qty-counter .pos-table__qty-display {
	order: 2 !important;
}

[dir="rtl"] .pos-table__qty-counter--rtl .pos-table__qty-btn--minus,
[lang^="ar"] .pos-table__qty-counter .pos-table__qty-btn--minus,
[lang^="he"] .pos-table__qty-counter .pos-table__qty-btn--minus,
[lang^="fa"] .pos-table__qty-counter .pos-table__qty-btn--minus {
	order: 1 !important;
}

/* =================================================================
   DYNAMIC THEME SUPPORT - All styling via CSS custom properties
   ================================================================= */
/* All theme styles are automatically applied via CSS custom properties
   defined in /src/posapp/styles/theme.css - no hardcoded dark mode overrides needed */

/* =================================================================
   IMPROVED BUTTON TEXT VISIBILITY FOR DARK/LIGHT THEMES
   ================================================================= */

/* Enhanced text visibility for minus button */
[data-theme="dark"] .pos-table__qty-btn--minus,
.v-theme--dark .pos-table__qty-btn--minus {
	background: rgba(251, 191, 36, 0.2) !important;
	color: #fbbf24 !important;
	border: 2px solid #fbbf24 !important;
}

[data-theme="dark"] .pos-table__qty-btn--minus .v-icon,
.v-theme--dark .pos-table__qty-btn--minus .v-icon {
	color: #fbbf24 !important;
}

[data-theme="dark"] .pos-table__qty-btn--minus:hover,
.v-theme--dark .pos-table__qty-btn--minus:hover {
	background: #fbbf24 !important;
	color: #1f2937 !important;
}

[data-theme="dark"] .pos-table__qty-btn--minus:hover .v-icon,
.v-theme--dark .pos-table__qty-btn--minus:hover .v-icon {
	color: #1f2937 !important;
}

/* Enhanced text visibility for plus button in dark mode */
[data-theme="dark"] .pos-table__qty-btn--plus,
.v-theme--dark .pos-table__qty-btn--plus {
	background: rgba(34, 197, 94, 0.2) !important;
	color: #22c55e !important;
	border: 2px solid #22c55e !important;
}

[data-theme="dark"] .pos-table__qty-btn--plus .v-icon,
.v-theme--dark .pos-table__qty-btn--plus .v-icon {
	color: #22c55e !important;
}

[data-theme="dark"] .pos-table__qty-btn--plus:hover,
.v-theme--dark .pos-table__qty-btn--plus:hover {
	background: #22c55e !important;
	color: #1f2937 !important;
}

[data-theme="dark"] .pos-table__qty-btn--plus:hover .v-icon,
.v-theme--dark .pos-table__qty-btn--plus:hover .v-icon {
	color: #1f2937 !important;
}

/* Ensure disabled buttons maintain proper contrast */
.pos-table__qty-btn:disabled {
	opacity: 0.5 !important;
	cursor: not-allowed !important;
}

.pos-table__qty-btn:disabled .v-icon {
	color: var(--pos-text-disabled) !important;
}

/* Vuetify table wrapper elements - using CSS custom properties */
:deep(.v-table__wrapper) {
	background: var(--pos-card-bg) !important;
	color: var(--pos-text-primary) !important;
}

:deep(.v-data-table__wrapper) {
	background: var(--pos-card-bg) !important;
	color: var(--pos-text-primary) !important;
}

:deep(.v-data-table),
:deep(.v-data-table-virtual) {
	background: var(--pos-card-bg) !important;
	color: var(--pos-text-primary) !important;
}

/* Vuetify table body cells - dynamic theming */
:deep(.v-data-table tbody td) {
	background: transparent !important;
	color: var(--pos-text-primary) !important;
	border-bottom-color: var(--pos-border) !important;
}

/* Vuetify table rows - dynamic theming */
:deep(.v-data-table tbody tr) {
	background: transparent !important;
}

:deep(.v-data-table tbody tr:hover) {
	background: var(--pos-table-row-hover) !important;
}

/* Expanded rows - dynamic theming */
:deep(.v-data-table__expanded-row) {
	background: var(--pos-surface-variant) !important;
}

:deep(.v-data-table__expanded-row td) {
	background: var(--pos-surface-variant) !important;
	color: var(--pos-text-primary) !important;
	border-color: var(--pos-border) !important;
}

/* Table footer/pagination - dynamic theming */
:deep(.v-data-table-footer) {
	background: var(--pos-card-bg) !important;
	color: var(--pos-text-primary) !important;
	border-color: var(--pos-border) !important;
}

/* No data text - dynamic theming */
:deep(.v-data-table__empty-wrapper) {
	color: var(--pos-text-secondary) !important;
}

/* =================================================================
   UTILITY CLASSES
   ================================================================= */

/* Clean up empty/hidden elements */
.pos-table :deep(tr[style*="height: 0px"]),
.pos-table :deep(tr[style*="height:0px"]) {
	display: none !important;
}

.pos-table :deep(.v-data-table__tr--placeholder),
.pos-table :deep(.v-table__tr--placeholder) {
	display: none !important;
}

/* Ensure smooth transitions */
.pos-table :deep(th),
.pos-table :deep(td) {
	transition:
		padding 0.2s ease,
		font-size 0.2s ease,
		width 0.2s ease;
}

.pos-table :deep(th),
.pos-table :deep(th .v-data-table-header__content),
.pos-table :deep(th .v-icon) {
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
	transform: translate3d(0, 0, 0);
	-webkit-transform: translate3d(0, 0, 0);
}
